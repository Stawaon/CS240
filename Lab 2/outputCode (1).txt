using System;
using System.Collections.Generic;

public class Game
{
    // Method to check for books in a player's hand
    private void CheckForBooks(Hand hand, List<Card> books)
    {
        for (int i = 2; i <= 14; i++)
        {
            int count = 0;
            foreach (Card card in hand.GetCards())
            {
                if (card.GetRank() == i)
                {
                    count++;
                }
            }
            if (count == 4)
            {
                var iterator = hand.GetCards().GetEnumerator();
                while (iterator.MoveNext())
                {
                    Card card = iterator.Current;
                    if (card.GetRank() == i)
                    {
                        iterator.Remove();
                    }
                }
                books.Add(new Card(i));
            }
        }
    }

    // Method to print the player's hand
    public void PrintHand(Hand hand)
    {
        hand.Print();
    }

    // Method to announce the start of the game
    public void AnnounceGameStart()
    {
        Console.WriteLine("Welcome to Go Fish! The goal of the game is to collect more \"books\" of cards than your opponent. ");
        Console.WriteLine("A book is a set of four cards with the same rank. Each turn you may ask your opponent for a card/cards of a specific rank. ");
        Console.WriteLine("If your opponent has that card or cards, they must give them to you, and you get another turn. ");
        Console.WriteLine("If your opponent does not have the card or cards, they say \"Go fish!\" and you must draw a card from the deck. ");
        Console.Write("To start, you've been dealt the hand: ");
        PrintHand(playerHand);
        Console.WriteLine();
    }

    // Method to display a player's books
    public void DisplayBooks(List<Card> books)
    {
        foreach (Card card in books)
        {
            if (card.GetRank() == 11)
            {
                Console.Write("J, ");
            }
            else if (card.GetRank() == 12)
            {
                Console.Write("Q, ");
            }
            else if (card.GetRank() == 13)
            {
                Console.Write("K, ");
            }
            else if (card.GetRank() == 14)
            {
                Console.Write("A, ");
            }
            else
            {
                Console.Write(card.GetRank() + ", ");
            }
        }
        Console.WriteLine();
    }

    // Method to declare the winner of the game
    public void DeclareWinner()
    {
        Console.Write("Your books: ");
        DisplayBooks(playerBooks);
        Console.Write("Opponent's books: ");
        DisplayBooks(opponentBooks);
        if (playerBooks.Count > opponentBooks.Count)
        {
            Console.WriteLine("Congratulations! You win!");
        }
        else if (playerBooks.Count < opponentBooks.Count)
        {
            Console.WriteLine("You lose! Better luck next time!");
        }
        else
        {
            Console.WriteLine("It's a tie!");
        }
    }
}

